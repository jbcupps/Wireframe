<!-- Site Navigation Header with Neumorphic Design -->
<header class="site-header neu-navbar">
    <div class="container">
        <div class="header-content">
            <a href="/" class="logo neu-btn">
                <i class="fas fa-cube neu-anim-pulse"></i>
                <span>4D Manifold Explorer</span>
            </a>
            <nav class="nav-links">
                <a href="/" id="nav-home" class="neu-anim-fade">Home</a>
                
                <div class="nav-dropdown neu-dropdown">
                    <div class="dropdown-toggle neu-btn">
                        <span>Manifold Physics</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="dropdown-menu neu-dropdown-content">
                        <a href="/methodical-search" id="nav-methodical-search" class="neu-list-item">Methodical Search</a>
                        <a href="/evolution" id="nav-evolution" class="neu-list-item">Evolution</a>
                        <a href="/visualization" id="nav-visualization" class="neu-list-item">Visualization</a>
                    </div>
                </div>
                
                <div class="nav-dropdown neu-dropdown">
                    <div class="dropdown-toggle neu-btn">
                        <span>Quantum Physics</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="dropdown-menu neu-dropdown-content">
                        <a href="/oscillator" id="nav-oscillator" class="neu-list-item">Oscillator</a>
                    </div>
                </div>
                
                <div class="nav-dropdown neu-dropdown">
                    <div class="dropdown-toggle neu-btn">
                        <span>Electromagnetism</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="dropdown-menu neu-dropdown-content">
                        <a href="/maxwell" id="nav-maxwell" class="neu-list-item">Maxwell's Equations</a>
                    </div>
                </div>
            </nav>
            
            <!-- Theme Toggle Button -->
            <div class="header-right">
                <label class="neu-switch" for="themeToggle">
                    <input type="checkbox" id="themeToggle">
                    <span class="neu-switch-slider"></span>
                </label>
                <a href="/methodical-search" class="cta-button neu-btn neu-btn-primary neu-anim-slide-up">
                    <i class="fas fa-search"></i>
                    <span>Explore Now</span>
                </a>
            </div>
            
            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn neu-btn" aria-label="Toggle mobile menu">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </div>
</header>

<!-- Mobile Navigation Menu -->
<div class="mobile-nav" id="mobileNav">
    <div class="mobile-nav-content neu-box">
        <a href="/" class="mobile-nav-item neu-list-item">Home</a>
        
        <div class="mobile-nav-group">
            <div class="mobile-nav-header neu-box-concave">Manifold Physics</div>
            <a href="/methodical-search" class="mobile-nav-item neu-list-item">Methodical Search</a>
            <a href="/evolution" class="mobile-nav-item neu-list-item">Evolution</a>
            <a href="/visualization" class="mobile-nav-item neu-list-item">Visualization</a>
        </div>
        
        <div class="mobile-nav-group">
            <div class="mobile-nav-header neu-box-concave">Quantum Physics</div>
            <a href="/oscillator" class="mobile-nav-item neu-list-item">Oscillator</a>
        </div>
        
        <div class="mobile-nav-group">
            <div class="mobile-nav-header neu-box-concave">Electromagnetism</div>
            <a href="/maxwell" class="mobile-nav-item neu-list-item">Maxwell's Equations</a>
        </div>
        
        <div class="mobile-nav-actions">
            <label class="neu-switch" for="mobileThemeToggle">
                <input type="checkbox" id="mobileThemeToggle">
                <span class="neu-switch-slider"></span>
                <span class="theme-label">Dark Mode</span>
            </label>
            
            <a href="/methodical-search" class="cta-button neu-btn neu-btn-primary neu-anim-slide-up">
                <i class="fas fa-search"></i>
                <span>Explore Now</span>
            </a>
        </div>
    </div>
</div>

<!-- JavaScript for mobile menu toggle -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const mobileNav = document.getElementById('mobileNav');
        
        if (mobileMenuBtn && mobileNav) {
            mobileMenuBtn.addEventListener('click', function() {
                mobileNav.classList.toggle('active');
                this.classList.toggle('active');
                
                // Animation for mobile menu items
                const items = mobileNav.querySelectorAll('.neu-list-item');
                items.forEach((item, index) => {
                    item.style.animationDelay = (0.1 * index) + 's';
                    if (mobileNav.classList.contains('active')) {
                        item.classList.add('neu-anim-slide-right');
                    } else {
                        item.classList.remove('neu-anim-slide-right');
                    }
                });
            });
        }
        
        // Sync theme toggles
        const themeToggle = document.getElementById('themeToggle');
        const mobileThemeToggle = document.getElementById('mobileThemeToggle');
        
        function syncThemeToggles(sourceToggle, targetToggle) {
            if (sourceToggle && targetToggle) {
                targetToggle.checked = sourceToggle.checked;
            }
        }
        
        if (themeToggle && mobileThemeToggle) {
            themeToggle.addEventListener('change', function() {
                document.body.classList.toggle('dark-theme');
                syncThemeToggles(themeToggle, mobileThemeToggle);
            });
            
            mobileThemeToggle.addEventListener('change', function() {
                document.body.classList.toggle('dark-theme');
                syncThemeToggles(mobileThemeToggle, themeToggle);
            });
            
            // Initialize theme based on user preference
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            if (prefersDarkScheme.matches) {
                document.body.classList.add('dark-theme');
                themeToggle.checked = true;
                mobileThemeToggle.checked = true;
            }
        }
    });
</script>

<style>
    /* Mobile Nav Styles */
    .mobile-nav {
        position: fixed;
        top: 70px;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(var(--neu-background-rgb), 0.95);
        z-index: 1000;
        display: none;
        overflow-y: auto;
        padding: 20px;
    }
    
    .mobile-nav.active {
        display: block;
    }
    
    .mobile-nav-content {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }
    
    .mobile-nav-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .mobile-nav-header {
        font-weight: bold;
        color: var(--neu-primary);
        padding: 10px;
    }
    
    .mobile-nav-item {
        padding: 12px;
        color: var(--neu-text-primary);
        text-decoration: none;
        border-radius: var(--neu-border-radius);
        transition: all 0.3s ease;
    }
    
    .mobile-nav-item:hover {
        box-shadow: var(--neu-shadow-inset-light), var(--neu-shadow-inset-dark);
        color: var(--neu-primary);
    }
    
    .mobile-nav-actions {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-top: 30px;
    }
    
    .theme-label {
        margin-left: 70px;
        color: var(--neu-text-primary);
    }
    
    /* Mobile menu button animation */
    .mobile-menu-btn.active i {
        transform: rotate(90deg);
    }
    
    .mobile-menu-btn i {
        transition: transform 0.3s ease;
    }
    
    /* Responsive adjustments */
    @media (min-width: 769px) {
        .mobile-nav {
            display: none !important;
        }
    }
</style>

<!-- / Site Navigation Header --> 