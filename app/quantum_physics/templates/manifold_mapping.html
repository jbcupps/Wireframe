{% extends "base.html" %}

{% block title %}Manifold Mapping - 4D Manifold Explorer{% endblock %}

{% block head_extra %}
<script src="{{ url_for('static', filename='js/manifold_mapping.js') }}" defer></script>
{% endblock %}

{% block content %}
<div class="container py-4">
    <h1 class="mb-4">4D Manifold to Quantum Physics Mapping</h1>
    
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">Manifold Parameters</h5>
                </div>
                <div class="card-body">
                    <form id="mapping-form">
                        <div class="mb-3">
                            <label for="manifold-type" class="form-label">Manifold Type</label>
                            <select class="form-select" id="manifold-type">
                                <option value="sub_skb" selected>Sub-SKB (Möbius-like)</option>
                                <option value="skb">SKB (Klein Bottle)</option>
                                <option value="torus">Torus</option>
                                <option value="sphere">Sphere</option>
                                <option value="custom">Custom Topology</option>
                            </select>
                        </div>
                        
                        <div id="twist-controls">
                            <div class="mb-3">
                                <label for="twist-x" class="form-label">X-Axis Twist</label>
                                <input type="range" class="form-range" id="twist-x" min="-3" max="3" step="0.1" value="1">
                                <div class="d-flex justify-content-between">
                                    <small>-3</small>
                                    <small id="twist-x-value">1.0</small>
                                    <small>3</small>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="twist-y" class="form-label">Y-Axis Twist</label>
                                <input type="range" class="form-range" id="twist-y" min="-3" max="3" step="0.1" value="0">
                                <div class="d-flex justify-content-between">
                                    <small>-3</small>
                                    <small id="twist-y-value">0.0</small>
                                    <small>3</small>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="twist-z" class="form-label">Z-Axis Twist</label>
                                <input type="range" class="form-range" id="twist-z" min="-3" max="3" step="0.1" value="0">
                                <div class="d-flex justify-content-between">
                                    <small>-3</small>
                                    <small id="twist-z-value">0.0</small>
                                    <small>3</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="loop-factor" class="form-label">Loop Factor</label>
                            <input type="range" class="form-range" id="loop-factor" min="0.5" max="3" step="0.1" value="1">
                            <div class="d-flex justify-content-between">
                                <small>0.5</small>
                                <small id="loop-factor-value">1.0</small>
                                <small>3.0</small>
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">Map to Particle Properties</button>
                            <button type="button" id="reset-btn" class="btn btn-outline-secondary">Reset Parameters</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <div class="card shadow-sm">
                <div class="card-header bg-info text-white">
                    <h5 class="card-title mb-0">Topological Properties</h5>
                </div>
                <div class="card-body">
                    <div id="topo-properties" class="d-none">
                        <table class="table table-sm">
                            <tbody>
                                <tr>
                                    <th>Genus:</th>
                                    <td id="genus-value">--</td>
                                </tr>
                                <tr>
                                    <th>Orientability:</th>
                                    <td id="orientability-value">--</td>
                                </tr>
                                <tr>
                                    <th>Euler Characteristic:</th>
                                    <td id="euler-value">--</td>
                                </tr>
                                <tr>
                                    <th>Twist Complexity:</th>
                                    <td id="twist-complexity-value">--</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="loading-spinner" class="text-center d-none">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2">Mapping manifold...</p>
                    </div>
                    
                    <div id="info-placeholder" class="text-center">
                        <p class="text-muted mt-4">
                            <i class="bi bi-info-circle"></i> 
                            Configure manifold parameters and map to see topological properties.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-8">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="card-title mb-0">Particle Prediction</h5>
                </div>
                <div class="card-body">
                    <div id="prediction-results" class="d-none">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h5 class="card-title" id="particle-type">Electron-like</h5>
                                        <div class="progress mb-3">
                                            <div class="progress-bar" id="confidence-bar" role="progressbar" style="width: 85%;" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100">85% Confidence</div>
                                        </div>
                                        <table class="table table-sm">
                                            <tbody>
                                                <tr>
                                                    <th>Mass:</th>
                                                    <td id="mass-prediction">--</td>
                                                </tr>
                                                <tr>
                                                    <th>Charge:</th>
                                                    <td id="charge-prediction">--</td>
                                                </tr>
                                                <tr>
                                                    <th>Spin:</th>
                                                    <td id="spin-prediction">--</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h5 class="card-title">Mapping Explanation</h5>
                                        <p id="mapping-explanation" class="card-text">
                                            The topological features of this manifold configuration map to particle properties...
                                        </p>
                                        <div id="suggestions">
                                            <h6>Suggestions:</h6>
                                            <ul id="suggestion-list">
                                                <li>Increase twists to approach a different particle type</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="no-prediction" class="text-center">
                        <p class="text-muted mt-5 mb-5">
                            <i class="bi bi-diagram-3"></i>
                            Configure manifold parameters and click "Map to Particle Properties" to generate a prediction.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="card shadow-sm">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" id="visualization-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="manifold-tab" data-bs-toggle="tab" data-bs-target="#manifold-viz" type="button" role="tab">Manifold Visualization</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="comparison-tab" data-bs-toggle="tab" data-bs-target="#comparison-viz" type="button" role="tab">Property Comparison</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="topology-tab" data-bs-toggle="tab" data-bs-target="#topology-viz" type="button" role="tab">Topology Map</button>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content" id="visualization-content">
                        <div class="tab-pane fade show active" id="manifold-viz" role="tabpanel">
                            <div id="manifold-plot" style="height: 400px;"></div>
                        </div>
                        <div class="tab-pane fade" id="comparison-viz" role="tabpanel">
                            <div id="comparison-plot" style="height: 400px;"></div>
                        </div>
                        <div class="tab-pane fade" id="topology-viz" role="tabpanel">
                            <div id="topology-plot" style="height: 400px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="card-title mb-0">4D Manifold to Particle Mapping Theory</h5>
                </div>
                <div class="card-body">
                    <p>The 4D Manifold Theory proposes that fundamental particles can be understood as projections of four-dimensional topological structures (manifolds) into our three-dimensional space. By mapping the properties of these manifolds to observed particle characteristics, we can establish connections between abstract topology and physical reality.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h6>Key Mapping Principles</h6>
                            <ul>
                                <li><strong>Twist Parameters ⟷ Spin</strong>: The twist values along different axes correspond to intrinsic angular momentum (spin) properties of particles.</li>
                                <li><strong>Orientability ⟷ Charge</strong>: Non-orientable manifolds (like Klein bottles and Möbius strips) map to charged particles, while orientable ones (like tori and spheres) map to neutral particles.</li>
                                <li><strong>Loop Factor ⟷ Mass</strong>: The loop factor parameter influences the effective mass of the resulting particle in our 3D space.</li>
                                <li><strong>Topological Genus ⟷ Generation</strong>: Higher genus manifolds correspond to higher generation particles in the Standard Model.</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Standard Model Correspondences</h6>
                            <ul>
                                <li><strong>Electron-like particles</strong>: Möbius-like structures with single-axis twist (Sub-SKB)</li>
                                <li><strong>Neutrino-like particles</strong>: Torus-like structures with specific twist configurations</li>
                                <li><strong>Quark-like particles</strong>: Complex multi-twist SKB structures with fractional topological properties</li>
                                <li><strong>Gauge bosons</strong>: Manifolds with special connecting properties between different topological spaces</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h6 class="mt-4">Mathematical Foundation</h6>
                    <p>The mapping between 4D manifolds and particle properties relies on sophisticated mathematical relationships, including:</p>
                    <ul>
                        <li>Spin-Statistics correspondence derived from manifold orientability</li>
                        <li>Mass-energy relationships derived from manifold curvature and embedding properties</li>
                        <li>Charge quantization explained through topological invariants</li>
                        <li>Interaction strengths modeled as intersection properties between manifolds</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 